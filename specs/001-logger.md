# 로거 모듈

> 한 줄 요약: 서버/클라이언트 환경에서 사용 가능한 구조화된 로깅 시스템

## 개요

### 배경

- 개발/운영 환경에서 디버깅과 모니터링을 위한 일관된 로깅 필요
- console.log 직접 사용 시 로그 레벨 구분, 민감 정보 마스킹 불가
- 서버/클라이언트 환경에 따른 로깅 방식 분리 필요

### 목표

- 로그 레벨 기반 구조화된 로깅
- 민감 정보 자동 마스킹
- 서버/클라이언트 환경별 최적화된 로거 제공

## 사용자 시나리오

### 시나리오 1: 기본 로깅

```
1. 개발자가 logger.info("메시지", { userId: "123" }) 호출
2. 시스템이 타임스탬프, 로그 레벨, 메시지, 컨텍스트를 포맷팅하여 출력
```

### 시나리오 2: 민감 정보 마스킹

```
1. 개발자가 logger.info("로그인", { password: "secret123" }) 호출
2. 시스템이 password 필드를 "[REDACTED]"로 치환하여 출력
```

### 시나리오 3: API 요청/응답 로깅

```
1. API 핸들러에서 logApiRequest(req), logApiResponse(res) 호출
2. HTTP 메서드, URL, 상태 코드, 소요 시간 등 구조화된 로그 출력
```

## 요구사항

### 기능 요구사항

우선순위: 🔴 필수 | 🟡 권장 | 🟢 선택

- [ ] 🔴 4단계 로그 레벨 지원 (debug, info, warn, error)
- [ ] 🔴 구조화된 로그 포맷 (timestamp, level, message, context)
- [ ] 🔴 민감 정보 자동 마스킹 (password, token, secret, authorization, key)
- [ ] 🔴 환경별 로그 필터링 (development에서만 debug 출력)
- [ ] 🟡 서버용 로거 (API 요청/응답 로깅 헬퍼)
- [ ] 🟡 클라이언트용 로거 (사용자 액션, UI 에러 로깅 헬퍼)
- [ ] 🟢 순환 참조 안전한 컨텍스트 직렬화

### 비기능 요구사항

- **성능**: 로깅으로 인한 오버헤드 최소화
- **보안**: 민감 정보 노출 방지

## 구현 가이드

### 구현 위치

```
libs/logger/
├── types.ts      # 타입 정의
├── core.ts       # createLogger 팩토리
├── server.ts     # 서버용 로거
├── client.ts     # 클라이언트용 로거
└── index.ts      # Public exports
```

### 기존 코드 활용

| 모듈 | 용도 | 참고                  |
| ---- | ---- | --------------------- |
| 없음 | -    | 의존성 없는 독립 모듈 |

## 성공 기준

### 완료 조건

- [ ] 모든 기능 요구사항(🔴) 구현
- [ ] 타입 체크 통과 (`pnpm build`)
- [ ] 린트 통과 (`pnpm lint`)

### 검증 방법

```bash
pnpm build
pnpm lint

# 수동 테스트
# - 각 로그 레벨(debug, info, warn, error)별로 로그가 정상 출력되는지 확인
# - password 등 민감 정보가 포함된 로그가 마스킹 처리되는지 확인
# - 서버/클라이언트 환경에서 각각 로그가 정상 출력되는지 확인
```
