# ì–´ë“œë¯¼ ê´€ë¦¬ ì‹œìŠ¤í…œ

> í•œ ì¤„ ìš”ì•½: ê´€ë¦¬ìê°€ ìœ ì €, ìƒê¸°ë¶€, ë¦¬í¬íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ

## ê°œìš”

### ë°°ê²½

SKYROAD ì„œë¹„ìŠ¤ ìš´ì˜ì„ ìœ„í•´ ê´€ë¦¬ìê°€ ìœ ì €, ìƒê¸°ë¶€ ì œì¶œ, AI ë¦¬í¬íŠ¸ ê²€ìˆ˜, ë§¤ì¶œ í˜„í™© ë“±ì„ í•œê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ë“œë¯¼ ì‹œìŠ¤í…œì´ í•„ìš”í•˜ë‹¤. íŠ¹íˆ AIê°€ ìƒì„±í•œ ë¦¬í¬íŠ¸ë¥¼ ì „ë¬¸ê°€ê°€ ê²€ìˆ˜í•œ ë’¤ ê³ ê°ì—ê²Œ ì´ë©”ì¼ë¡œ ë°œì†¡í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ê°€ í•µì‹¬ì´ë‹¤.

### ëª©í‘œ

- ê´€ë¦¬ìê°€ ì„œë¹„ìŠ¤ ì „ì²´ í˜„í™©ì„ ëŒ€ì‹œë³´ë“œì—ì„œ í•œëˆˆì— íŒŒì•…
- ìœ ì €, ìƒê¸°ë¶€, ë¦¬í¬íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
- AI ë¦¬í¬íŠ¸ ê²€ìˆ˜ í›„ ì´ë©”ì¼ ë°œì†¡ê¹Œì§€ì˜ ì›Œí¬í”Œë¡œìš° ìë™í™”
- role ê¸°ë°˜ ê¶Œí•œ ëª¨ë¸ë¡œ ê´€ë¦¬ì/ì¼ë°˜ ìœ ì € ë¶„ë¦¬

---

## 1. ê¶Œí•œ ëª¨ë¸

### 1.1 ì—­í•  ì •ì˜

| ì—­í•     | `profiles.role` | ì„¤ëª…                          |
| ------- | --------------- | ----------------------------- |
| `user`  | `"user"`        | ì¼ë°˜ ì‚¬ìš©ì. ì–´ë“œë¯¼ ì ‘ê·¼ ë¶ˆê°€ |
| `admin` | `"admin"`       | ê´€ë¦¬ì. ì–´ë“œë¯¼ ëª¨ë“œ ì ‘ê·¼ ê°€ëŠ¥ |

### 1.2 ê¶Œí•œ ê²€ì¦ ë ˆì´ì–´

```
[í´ë¼ì´ì–¸íŠ¸]                    [ì„œë²„]
   â”‚                              â”‚
   â”œâ”€ í—¤ë” í† ê¸€ í‘œì‹œ ì—¬ë¶€         â”œâ”€ ë¯¸ë“¤ì›¨ì–´: /admin/* ê²½ë¡œ ê°€ë“œ
   â”‚  (profiles.role í™•ì¸)        â”‚  (profiles.role === 'admin' í™•ì¸)
   â”‚                              â”‚
   â””â”€ ì–´ë“œë¯¼ í˜ì´ì§€ ë Œë”ë§        â”œâ”€ API Route: ìš”ì²­ë§ˆë‹¤ is_admin() RPC ê²€ì¦
                                  â”‚
                                  â””â”€ RLS: admin ì „ìš© ì •ì±… ì ìš©
```

### 1.3 ê¸°ì¡´ ì¸í”„ë¼ í™œìš©

- **`profiles.role` í•„ë“œ**: `CHECK (role IN ('user', 'admin'))` - ì´ë¯¸ ì¡´ì¬
- **`is_admin()` RPC**: `SECURITY DEFINER`ë¡œ í˜„ì¬ ìœ ì €ê°€ adminì¸ì§€ í™•ì¸ - ì´ë¯¸ ì¡´ì¬
- **RLS**: ì–´ë“œë¯¼ ì „ìš© SELECT/UPDATE ì •ì±… ì¶”ê°€ í•„ìš”

### 1.4 ë¯¸ë“¤ì›¨ì–´ ê¶Œí•œ ê°€ë“œ

```
ê²½ë¡œ: /admin/*
1. ì„¸ì…˜ í™•ì¸ â†’ ë¯¸ì¸ì¦ ì‹œ / ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
2. profiles.role í™•ì¸ â†’ 'admin'ì´ ì•„ë‹ˆë©´ / ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
3. í†µê³¼ ì‹œ ì–´ë“œë¯¼ í˜ì´ì§€ ë Œë”ë§
```

### 1.5 ì–´ë“œë¯¼ ëª¨ë“œ ì „í™˜

- í—¤ë”ì—ì„œ í† ê¸€ ìŠ¤ìœ„ì¹˜ë¡œ ì–´ë“œë¯¼ ëª¨ë“œ ì§„ì…/ë³µê·€
- `role === 'admin'`ì¸ ìœ ì €ì—ê²Œë§Œ í† ê¸€ í‘œì‹œ
- ì–´ë“œë¯¼ ëª¨ë“œ ì§„ì… ì‹œ `/admin/dashboard`ë¡œ ì´ë™
- ì¼ë°˜ ëª¨ë“œ ë³µê·€ ì‹œ `/`ë¡œ ì´ë™

---

## 2. í˜ì´ì§€ë³„ ìƒì„¸ ê¸°ëŠ¥ ì •ì˜

### 2.1 ì–´ë“œë¯¼ ë ˆì´ì•„ì›ƒ

#### í—¤ë” (`/admin` ê²½ë¡œ ì „ìš©)

ì¼ë°˜ ìœ ì € í—¤ë”ì™€ ì™„ì „íˆ ë¶„ë¦¬ëœ ì–´ë“œë¯¼ ì „ìš© í—¤ë”ë¥¼ ì‚¬ìš©í•œë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [SKYROAD Admin]   ëŒ€ì‹œë³´ë“œ  ìœ ì €ê´€ë¦¬  ìƒê¸°ë¶€ê´€ë¦¬  ë¦¬í¬íŠ¸ê´€ë¦¬  â”‚
â”‚                                           [ì¼ë°˜ ëª¨ë“œ] [ë¡œê·¸ì•„ì›ƒ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬ì„± ìš”ì†Œ:**

- ì¢Œì¸¡: ë¡œê³  + "Admin" ë±ƒì§€, ë„¤ë¹„ê²Œì´ì…˜ (ëŒ€ì‹œë³´ë“œ, ìœ ì €ê´€ë¦¬, ìƒê¸°ë¶€ê´€ë¦¬, ë¦¬í¬íŠ¸ê´€ë¦¬)
- ìš°ì¸¡: "ì¼ë°˜ ëª¨ë“œ" ë²„íŠ¼ (ì¼ë°˜ ì‚¬ì´íŠ¸ë¡œ ë³µê·€), ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
- í˜„ì¬ í™œì„± í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸

#### êµ¬í˜„ ìœ„ì¹˜

```
app/admin/
â”œâ”€â”€ layout.tsx              # ì–´ë“œë¯¼ ë ˆì´ì•„ì›ƒ (ì–´ë“œë¯¼ í—¤ë” í¬í•¨)
â”œâ”€â”€ _components/
â”‚   â”œâ”€â”€ AdminHeader.tsx     # ì–´ë“œë¯¼ ì „ìš© í—¤ë”
â”‚   â””â”€â”€ AdminSidebar.tsx    # (Phase 2) ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ users/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ records/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ reports/
    â””â”€â”€ page.tsx
```

---

### 2.2 ëŒ€ì‹œë³´ë“œ (`/admin/dashboard`)

#### í•µì‹¬ ì§€í‘œ ì¹´ë“œ (ìƒë‹¨)

| ì§€í‘œ           | ë°ì´í„° ì†ŒìŠ¤                                                   | í‘œì‹œ í˜•ì‹        |
| -------------- | ------------------------------------------------------------- | ---------------- |
| ì´ ìœ ì € ìˆ˜     | `SELECT COUNT(*) FROM profiles`                               | ìˆ«ì             |
| ì‹ ê·œ ê°€ì…      | `profiles WHERE created_at >= ì˜¤ëŠ˜ 00:00`                     | ìˆ«ì + ì „ì¼ ëŒ€ë¹„ |
| ìƒê¸°ë¶€ ì œì¶œ ìˆ˜ | `SELECT COUNT(*) FROM records`                                | ìˆ«ì             |
| ë¦¬í¬íŠ¸ ë°œê¸‰ ìˆ˜ | `SELECT COUNT(*) FROM reports WHERE delivered_at IS NOT NULL` | ìˆ«ì             |
| ì´ ë§¤ì¶œ        | `SUM(payments.amount) WHERE status = 'done'`                  | ì›í™” í¬ë§·        |

#### ì°¨íŠ¸ ì˜ì—­

| ì°¨íŠ¸             | ìœ í˜•      | Xì¶•  | Yì¶•          | ê¸°ê°„ ì„ íƒ     |
| ---------------- | --------- | ---- | ------------ | ------------- |
| ì¼ë³„ ê°€ì… ì¶”ì´   | ë¼ì¸ ì°¨íŠ¸ | ë‚ ì§œ | ì‹ ê·œ ê°€ì… ìˆ˜ | 7ì¼/30ì¼/90ì¼ |
| ì¼ë³„ ë§¤ì¶œ ì¶”ì´   | ë°” ì°¨íŠ¸   | ë‚ ì§œ | ë§¤ì¶œ (ì›)    | 7ì¼/30ì¼/90ì¼ |
| ì „í™˜ìœ¨ í¼ë„      | í¼ë„ ì°¨íŠ¸ | ë‹¨ê³„ | ìœ ì € ìˆ˜      | ì „ì²´ ê¸°ê°„     |
| í”Œëœë³„ ë§¤ì¶œ ë¹„êµ | íŒŒì´ ì°¨íŠ¸ | í”Œëœ | ë§¤ì¶œ ë¹„ìœ¨    | 30ì¼/ì „ì²´     |

#### ì „í™˜ìœ¨ í¼ë„ ì •ì˜

```
ê°€ì… â†’ ì˜¨ë³´ë”© ì™„ë£Œ â†’ ìƒê¸°ë¶€ ì œì¶œ â†’ ê²°ì œ â†’ ë¦¬í¬íŠ¸ ìˆ˜ë ¹
 100%     80%          60%         30%       28%
```

ê° ë‹¨ê³„ì˜ ì „í™˜ìœ¨ = (í•´ë‹¹ ë‹¨ê³„ ë„ë‹¬ ìœ ì € ìˆ˜ / ê°€ì… ìœ ì € ìˆ˜) \* 100

| ë‹¨ê³„        | ì¡°ê±´                                   |
| ----------- | -------------------------------------- |
| ê°€ì…        | `profiles` ì¡´ì¬                        |
| ì˜¨ë³´ë”© ì™„ë£Œ | `profiles.onboarding_completed = true` |
| ìƒê¸°ë¶€ ì œì¶œ | `records` ì¡´ì¬                         |
| ê²°ì œ        | `payments.status = 'done'`             |
| ë¦¬í¬íŠ¸ ìˆ˜ë ¹ | `reports.delivered_at IS NOT NULL`     |

#### ë¦¬í…ì…˜ (ê°„ì´)

- ì •ì˜: ìµœê·¼ 30ì¼ ë‚´ ì¬ë°©ë¬¸í•œ ìœ ì € ë¹„ìœ¨ (auth.users.last_sign_in_at ê¸°ì¤€)
- Phase 1ì—ì„œëŠ” ë‹¨ìˆœ ìˆ˜ì¹˜ë§Œ í‘œì‹œ, Phase 2ì—ì„œ ì½”í˜¸íŠ¸ ë¶„ì„ ì¶”ê°€

---

### 2.3 ìœ ì € ê´€ë¦¬ (`/admin/users`)

#### ìœ ì € ëª©ë¡ í…Œì´ë¸”

| ì»¬ëŸ¼        | ë°ì´í„° ì†ŒìŠ¤                     | ì •ë ¬ | í•„í„°        |
| ----------- | ------------------------------- | ---- | ----------- |
| ì´ë¦„        | `profiles.name`                 | -    | í…ìŠ¤íŠ¸ ê²€ìƒ‰ |
| ì´ë©”ì¼      | `auth.users.email`              | -    | í…ìŠ¤íŠ¸ ê²€ìƒ‰ |
| ì—­í•         | `profiles.role`                 | -    | ë“œë¡­ë‹¤ìš´    |
| ê³ ë“±í•™êµ    | `profiles.high_school_name`     | -    | -           |
| í•™ë…„        | `profiles.grade`                | -    | ë“œë¡­ë‹¤ìš´    |
| ì˜¨ë³´ë”© ì™„ë£Œ | `profiles.onboarding_completed` | -    | ì²´í¬ë°•ìŠ¤    |
| ê°€ì…ì¼      | `profiles.created_at`           | ê°€ëŠ¥ | ë‚ ì§œ ë²”ìœ„   |
| ìƒê¸°ë¶€      | `records` JOIN ì¡´ì¬ ì—¬ë¶€        | -    | -           |
| ì£¼ë¬¸ ìˆ˜     | `orders` COUNT                  | -    | -           |

#### ìœ ì € ìƒì„¸ (ëª¨ë‹¬ ë˜ëŠ” ì‚¬ì´ë“œíŒ¨ë„)

- í”„ë¡œí•„ ì •ë³´ (ì´ë¦„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, í•™êµ, í•™ë…„)
- ëª©í‘œ ëŒ€í•™ ëª©ë¡ (`target_universities`)
- ìƒê¸°ë¶€ ì œì¶œ ì´ë ¥ (`records`)
- ì£¼ë¬¸/ê²°ì œ ì´ë ¥ (`orders` + `payments`)
- ë¦¬í¬íŠ¸ ë°œê¸‰ ì´ë ¥ (`reports`)

#### ìœ ì € ê´€ë¦¬ ì•¡ì…˜

- ğŸ”´ ì—­í•  ë³€ê²½ (user â†” admin) - í™•ì¸ ëª¨ë‹¬ í•„ìˆ˜
- ğŸŸ¡ ìœ ì € ê²€ìƒ‰ (ì´ë¦„, ì´ë©”ì¼)
- ğŸŸ¡ í˜ì´ì§€ë„¤ì´ì…˜ (20ê±´/í˜ì´ì§€)

---

### 2.4 ìƒê¸°ë¶€ ê´€ë¦¬ (`/admin/records`)

#### ìƒê¸°ë¶€ ëª©ë¡ í…Œì´ë¸”

| ì»¬ëŸ¼        | ë°ì´í„° ì†ŒìŠ¤               | ì •ë ¬ | í•„í„°        |
| ----------- | ------------------------- | ---- | ----------- |
| ìœ ì €ëª…      | `profiles.name` (JOIN)    | -    | í…ìŠ¤íŠ¸ ê²€ìƒ‰ |
| ì œì¶œ ë°©ì‹   | `records.submission_type` | -    | ë“œë¡­ë‹¤ìš´    |
| í•™ë…„        | `records.grade_level`     | -    | ë“œë¡­ë‹¤ìš´    |
| í…ìŠ¤íŠ¸ ê²€ì¦ | `records.text_verified`   | -    | ì²´í¬ë°•ìŠ¤    |
| ì£¼ë¬¸ ìƒíƒœ   | `orders.status` (JOIN)    | -    | ë“œë¡­ë‹¤ìš´    |
| ì œì¶œì¼      | `records.created_at`      | ê°€ëŠ¥ | ë‚ ì§œ ë²”ìœ„   |

#### ìƒê¸°ë¶€ ìƒì„¸ (ëª¨ë‹¬ ë˜ëŠ” ë³„ë„ í˜ì´ì§€)

- ìƒê¸°ë¶€ ì›ë³¸ í…ìŠ¤íŠ¸ (`records.final_text`)
- ì„¸ë¶€ í…Œì´ë¸” ë°ì´í„°: ì¶œê²°, ìˆ˜ìƒ, ìê²©ì¦, ì°½ì²´, ë´‰ì‚¬, êµê³¼, ì„¸íŠ¹, ë…ì„œ, í–‰íŠ¹
- ì—°ê²°ëœ ì£¼ë¬¸ ì •ë³´
- ì—°ê²°ëœ ë¦¬í¬íŠ¸ ì •ë³´

#### ìƒê¸°ë¶€ ê´€ë¦¬ ì•¡ì…˜

- ğŸ”´ ìƒê¸°ë¶€ ìƒì„¸ ì¡°íšŒ (ì½ê¸° ì „ìš©)
- ğŸŸ¡ ìƒê¸°ë¶€ ê²€ìƒ‰ (ìœ ì €ëª… ê¸°ì¤€)
- ğŸŸ¡ í˜ì´ì§€ë„¤ì´ì…˜ (20ê±´/í˜ì´ì§€)

---

### 2.5 ë¦¬í¬íŠ¸ ê´€ë¦¬ (`/admin/reports`)

#### ë¦¬í¬íŠ¸ ëª©ë¡ í…Œì´ë¸”

| ì»¬ëŸ¼      | ë°ì´í„° ì†ŒìŠ¤                   | ì •ë ¬ | í•„í„°        |
| --------- | ----------------------------- | ---- | ----------- |
| ìœ ì €ëª…    | `profiles.name` (orders JOIN) | -    | í…ìŠ¤íŠ¸ ê²€ìƒ‰ |
| í”Œëœ      | `plans.display_name` (JOIN)   | -    | ë“œë¡­ë‹¤ìš´    |
| ëª©í‘œ ëŒ€í•™ | `target_universities` (JOIN)  | -    | -           |
| ê²€ìˆ˜ ìƒíƒœ | ì•„ë˜ ìƒíƒœ ë¡œì§ ì°¸ê³            | -    | ë“œë¡­ë‹¤ìš´    |
| AI ìƒì„±ì¼ | `reports.ai_generated_at`     | ê°€ëŠ¥ | ë‚ ì§œ ë²”ìœ„   |
| ê²€ìˆ˜ì    | `profiles.name` (reviewed_by) | -    | -           |
| ê²€ìˆ˜ì¼    | `reports.reviewed_at`         | ê°€ëŠ¥ | -           |
| ë°œì†¡ì¼    | `reports.delivered_at`        | ê°€ëŠ¥ | -           |

#### ë¦¬í¬íŠ¸ ê²€ìˆ˜ ìƒíƒœ ì •ì˜

`reports` í…Œì´ë¸” í•„ë“œ ì¡°í•©ìœ¼ë¡œ ìƒíƒœë¥¼ ë„ì¶œí•œë‹¤:

| ìƒíƒœ           | ì¡°ê±´                                               | ë±ƒì§€ ìƒ‰ìƒ |
| -------------- | -------------------------------------------------- | --------- |
| `AI ìƒì„± ëŒ€ê¸°` | `content IS NULL AND ai_generated_at IS NULL`      | íšŒìƒ‰      |
| `ê²€ìˆ˜ ëŒ€ê¸°`    | `content IS NOT NULL AND reviewed_at IS NULL`      | ë…¸ë€ìƒ‰    |
| `ê²€ìˆ˜ ì™„ë£Œ`    | `reviewed_at IS NOT NULL AND delivered_at IS NULL` | íŒŒë€ìƒ‰    |
| `ë°œì†¡ ì™„ë£Œ`    | `delivered_at IS NOT NULL`                         | ì´ˆë¡ìƒ‰    |

#### ë¦¬í¬íŠ¸ ê²€ìˆ˜ ìƒì„¸ í˜ì´ì§€ / ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¦¬í¬íŠ¸ ê²€ìˆ˜ - {ìœ ì €ëª…} ({í”Œëœëª…})                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  [ê¸°ë³¸ ì •ë³´]                                     â”‚
â”‚  ìœ ì €: í™ê¸¸ë™ | í”Œëœ: ìŠ¤íƒ ë‹¤ë“œ                     â”‚
â”‚  ëª©í‘œ ëŒ€í•™: ì„œìš¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ë¶€ (í•™ì¢…)          â”‚
â”‚  AI ìƒì„±ì¼: 2026-02-25 14:30                     â”‚
â”‚                                                 â”‚
â”‚  [AI ìƒì„± ë¦¬í¬íŠ¸ ë‚´ìš©]                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  (JSONB contentë¥¼ ì½ê¸° ì¢‹ì€ í˜•íƒœë¡œ ë Œë”ë§)  â”‚    â”‚
â”‚  â”‚  ...                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â”‚  [ê²€ìˆ˜ ë©”ëª¨]                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  (textarea - review_notes)               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â”‚  [ê²€ìˆ˜ ì™„ë£Œ]  [ê²€ìˆ˜ ì™„ë£Œ + ì´ë©”ì¼ ë°œì†¡]            â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ìœ ì € í”Œë¡œìš°

### 3.1 ì–´ë“œë¯¼ ëª¨ë“œ ì§„ì…

```
1. admin ìœ ì €ê°€ ì¼ë°˜ ì‚¬ì´íŠ¸ì—ì„œ í—¤ë”ì˜ "ì–´ë“œë¯¼" í† ê¸€ í´ë¦­
2. /admin/dashboard ë¡œ ì´ë™
3. ì–´ë“œë¯¼ ì „ìš© í—¤ë” + ë ˆì´ì•„ì›ƒ ë Œë”ë§
4. ì¼ë°˜ ëª¨ë“œ ë³µê·€ ì‹œ "ì¼ë°˜ ëª¨ë“œ" ë²„íŠ¼ í´ë¦­ â†’ / ë¡œ ì´ë™
```

### 3.2 ë¦¬í¬íŠ¸ ê²€ìˆ˜ â†’ ì´ë©”ì¼ ë°œì†¡ (í•µì‹¬ í”Œë¡œìš°)

```
1. ê´€ë¦¬ìê°€ /admin/reports ì—ì„œ "ê²€ìˆ˜ ëŒ€ê¸°" ìƒíƒœì¸ ë¦¬í¬íŠ¸ ëª©ë¡ í™•ì¸
2. ë¦¬í¬íŠ¸ í–‰ í´ë¦­ â†’ ê²€ìˆ˜ ìƒì„¸ í™”ë©´ ì§„ì…
3. AIê°€ ìƒì„±í•œ ë¦¬í¬íŠ¸ ë‚´ìš©(JSONB) í™•ì¸
4. í•„ìš” ì‹œ ê²€ìˆ˜ ë©”ëª¨(review_notes) ì‘ì„±
5-A. [ê²€ìˆ˜ ì™„ë£Œ] ë²„íŠ¼ í´ë¦­:
   â†’ reports.reviewed_by = í˜„ì¬ adminì˜ user_id
   â†’ reports.reviewed_at = NOW()
   â†’ reports.review_notes = ì…ë ¥í•œ ë©”ëª¨
   â†’ orders.status = 'review_complete'
   â†’ ìƒíƒœê°€ "ê²€ìˆ˜ ì™„ë£Œ"ë¡œ ë³€ê²½
5-B. [ê²€ìˆ˜ ì™„ë£Œ + ì´ë©”ì¼ ë°œì†¡] ë²„íŠ¼ í´ë¦­:
   â†’ ìœ„ 5-A ê³¼ì • ìˆ˜í–‰
   â†’ Resend APIë¡œ ë¦¬í¬íŠ¸ ì´ë©”ì¼ ë°œì†¡
   â†’ reports.delivered_at = NOW()
   â†’ orders.status = 'delivered'
   â†’ ìƒíƒœê°€ "ë°œì†¡ ì™„ë£Œ"ë¡œ ë³€ê²½
6. ë°œì†¡ ì„±ê³µ ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
7. ë°œì†¡ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ í† ìŠ¤íŠ¸ + ì¬ì‹œë„ ê°€ëŠ¥
```

### 3.3 ì´ë©”ì¼ ë°œì†¡ ìƒì„¸

**ë°œì†¡ ëŒ€ìƒ**: ì£¼ë¬¸í•œ ìœ ì €ì˜ ì´ë©”ì¼ (`auth.users.email`, orders â†’ profiles â†’ auth.users)

**ì´ë©”ì¼ ë‚´ìš© êµ¬ì„±**:

- ì œëª©: `[SKYROAD] {ìœ ì €ëª…}ë‹˜ì˜ ìƒê¸°ë¶€ ë¶„ì„ ë¦¬í¬íŠ¸ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤`
- ë³¸ë¬¸: ë¦¬í¬íŠ¸ ìš”ì•½ + ì „ì²´ ë¦¬í¬íŠ¸ ì¡°íšŒ ë§í¬
- ë°œì†¡ ë°©ë²•: Resend API (ì„œë²„ ì‚¬ì´ë“œ)

**Resend ì—°ë™**:

- í™˜ê²½ ë³€ìˆ˜: `RESEND_API_KEY` ì¶”ê°€ í•„ìš”
- ë°œì‹ ì: `noreply@skyroad.co.kr` (Resendì— ë„ë©”ì¸ ì¸ì¦ í•„ìš”)

---

## 4. API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

ëª¨ë“  ì–´ë“œë¯¼ APIëŠ” `/api/admin/*` ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë©°, ê³µí†µì ìœ¼ë¡œ ë‹¤ìŒì„ ê²€ì¦í•œë‹¤:

1. ì¸ì¦ í™•ì¸ (`supabase.auth.getUser()`)
2. ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ (`is_admin()` RPC ë˜ëŠ” `profiles.role` ì§ì ‘ ì¡°íšŒ)

### 4.1 ëŒ€ì‹œë³´ë“œ API

| ì—”ë“œí¬ì¸íŠ¸                          | ë©”ì„œë“œ | ì„¤ëª…               | ìš”ì²­ íŒŒë¼ë¯¸í„°          | ì‘ë‹µ              |
| ----------------------------------- | ------ | ------------------ | ---------------------- | ----------------- |
| `/api/admin/dashboard/stats`        | GET    | í•µì‹¬ ì§€í‘œ ì¡°íšŒ     | -                      | `DashboardStats`  |
| `/api/admin/dashboard/charts`       | GET    | ì°¨íŠ¸ ë°ì´í„° ì¡°íšŒ   | `?period=7d\|30d\|90d` | `ChartData`       |
| `/api/admin/dashboard/funnel`       | GET    | ì „í™˜ìœ¨ í¼ë„ ë°ì´í„° | -                      | `FunnelData`      |
| `/api/admin/dashboard/plan-revenue` | GET    | í”Œëœë³„ ë§¤ì¶œ ë¹„êµ   | `?period=30d\|all`     | `PlanRevenueData` |

### 4.2 ìœ ì € ê´€ë¦¬ API

| ì—”ë“œí¬ì¸íŠ¸                   | ë©”ì„œë“œ | ì„¤ëª…           | ìš”ì²­ íŒŒë¼ë¯¸í„°                                       | ì‘ë‹µ                |
| ---------------------------- | ------ | -------------- | --------------------------------------------------- | ------------------- |
| `/api/admin/users`           | GET    | ìœ ì € ëª©ë¡ ì¡°íšŒ | `?page=1&limit=20&search=&role=&grade=&onboarding=` | `PaginatedUsers`    |
| `/api/admin/users/[id]`      | GET    | ìœ ì € ìƒì„¸ ì¡°íšŒ | -                                                   | `UserDetail`        |
| `/api/admin/users/[id]/role` | PATCH  | ì—­í•  ë³€ê²½      | `{ role: 'user' \| 'admin' }`                       | `{ success: true }` |

### 4.3 ìƒê¸°ë¶€ ê´€ë¦¬ API

| ì—”ë“œí¬ì¸íŠ¸                | ë©”ì„œë“œ | ì„¤ëª…             | ìš”ì²­ íŒŒë¼ë¯¸í„°                                             | ì‘ë‹µ               |
| ------------------------- | ------ | ---------------- | --------------------------------------------------------- | ------------------ |
| `/api/admin/records`      | GET    | ìƒê¸°ë¶€ ëª©ë¡ ì¡°íšŒ | `?page=1&limit=20&search=&type=&grade=&verified=&status=` | `PaginatedRecords` |
| `/api/admin/records/[id]` | GET    | ìƒê¸°ë¶€ ìƒì„¸ ì¡°íšŒ | -                                                         | `RecordDetail`     |

### 4.4 ë¦¬í¬íŠ¸ ê´€ë¦¬ API

| ì—”ë“œí¬ì¸íŠ¸                        | ë©”ì„œë“œ | ì„¤ëª…                    | ìš”ì²­ íŒŒë¼ë¯¸í„°                            | ì‘ë‹µ                |
| --------------------------------- | ------ | ----------------------- | ---------------------------------------- | ------------------- |
| `/api/admin/reports`              | GET    | ë¦¬í¬íŠ¸ ëª©ë¡ ì¡°íšŒ        | `?page=1&limit=20&search=&status=&plan=` | `PaginatedReports`  |
| `/api/admin/reports/[id]`         | GET    | ë¦¬í¬íŠ¸ ìƒì„¸ ì¡°íšŒ        | -                                        | `ReportDetail`      |
| `/api/admin/reports/[id]/review`  | POST   | ê²€ìˆ˜ ì™„ë£Œ ì²˜ë¦¬          | `{ reviewNotes?: string }`               | `{ success: true }` |
| `/api/admin/reports/[id]/deliver` | POST   | ê²€ìˆ˜ ì™„ë£Œ + ì´ë©”ì¼ ë°œì†¡ | `{ reviewNotes?: string }`               | `{ success: true }` |

---

## 5. íƒ€ì… ì •ì˜

```typescript
// â”€â”€â”€ ëŒ€ì‹œë³´ë“œ â”€â”€â”€

interface DashboardStats {
  totalUsers: number;
  newUsersToday: number;
  newUsersYesterday: number;
  totalRecords: number;
  totalDeliveredReports: number;
  totalRevenue: number;
}

interface ChartDataPoint {
  date: string; // YYYY-MM-DD
  value: number;
}

interface ChartData {
  signups: ChartDataPoint[];
  revenue: ChartDataPoint[];
}

interface FunnelStep {
  label: string;
  count: number;
  rate: number; // 0-100
}

type FunnelData = FunnelStep[];

interface PlanRevenue {
  planName: string;
  displayName: string;
  revenue: number;
  count: number;
}

type PlanRevenueData = PlanRevenue[];

// â”€â”€â”€ ìœ ì € ê´€ë¦¬ â”€â”€â”€

interface AdminUser {
  id: string;
  name: string | null;
  email: string;
  role: "user" | "admin";
  highSchoolName: string | null;
  grade: string | null;
  onboardingCompleted: boolean;
  createdAt: string;
  recordCount: number;
  orderCount: number;
}

interface UserDetail extends AdminUser {
  phone: string | null;
  highSchoolType: string | null;
  admissionYear: number | null;
  targetUniversities: TargetUniversity[];
  records: RecordSummary[];
  orders: OrderSummary[];
}

// â”€â”€â”€ ìƒê¸°ë¶€ ê´€ë¦¬ â”€â”€â”€

interface AdminRecord {
  id: string;
  userName: string | null;
  userId: string;
  submissionType: "pdf" | "image" | "text";
  gradeLevel: string;
  textVerified: boolean;
  orderStatus: string | null;
  createdAt: string;
}

interface RecordDetail extends AdminRecord {
  finalText: string | null;
  attendance: Record<string, unknown>[];
  awards: Record<string, unknown>[];
  certifications: Record<string, unknown>[];
  creativeActivities: Record<string, unknown>[];
  volunteerActivities: Record<string, unknown>[];
  generalSubjects: Record<string, unknown>[];
  careerSubjects: Record<string, unknown>[];
  artsPhysicalSubjects: Record<string, unknown>[];
  subjectEvaluations: Record<string, unknown>[];
  readingActivities: Record<string, unknown>[];
  behavioralAssessments: Record<string, unknown>[];
}

// â”€â”€â”€ ë¦¬í¬íŠ¸ ê´€ë¦¬ â”€â”€â”€

type ReportStatus =
  | "ai_pending"
  | "review_pending"
  | "review_complete"
  | "delivered";

interface AdminReport {
  id: string;
  userName: string | null;
  userEmail: string;
  planName: string;
  targetUniversity: string | null;
  status: ReportStatus;
  aiGeneratedAt: string | null;
  reviewedBy: string | null;
  reviewedAt: string | null;
  deliveredAt: string | null;
}

interface ReportDetail extends AdminReport {
  orderId: string;
  content: Record<string, unknown> | null;
  reviewNotes: string | null;
}

// â”€â”€â”€ ê³µí†µ â”€â”€â”€

interface PaginatedResponse<T> {
  data: T[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

type PaginatedUsers = PaginatedResponse<AdminUser>;
type PaginatedRecords = PaginatedResponse<AdminRecord>;
type PaginatedReports = PaginatedResponse<AdminReport>;
```

---

## 6. DB ë³€ê²½ì‚¬í•­

### 6.1 RLS ì •ì±… ì¶”ê°€

ì–´ë“œë¯¼ì´ ëª¨ë“  í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒ/ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ RLS ì •ì±…ì„ ì¶”ê°€í•œë‹¤.

```sql
-- profiles: ì–´ë“œë¯¼ì€ ëª¨ë“  í”„ë¡œí•„ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "admin_select_all_profiles"
  ON profiles FOR SELECT
  TO authenticated
  USING (is_admin());

-- profiles: ì–´ë“œë¯¼ì€ role ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "admin_update_profiles"
  ON profiles FOR UPDATE
  TO authenticated
  USING (is_admin())
  WITH CHECK (is_admin());

-- records: ì–´ë“œë¯¼ì€ ëª¨ë“  ìƒê¸°ë¶€ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "admin_select_all_records"
  ON records FOR SELECT
  TO authenticated
  USING (is_admin());

-- orders: ì–´ë“œë¯¼ì€ ëª¨ë“  ì£¼ë¬¸ ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "admin_select_all_orders"
  ON orders FOR SELECT
  TO authenticated
  USING (is_admin());

CREATE POLICY "admin_update_orders"
  ON orders FOR UPDATE
  TO authenticated
  USING (is_admin())
  WITH CHECK (is_admin());

-- payments: ì–´ë“œë¯¼ì€ ëª¨ë“  ê²°ì œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "admin_select_all_payments"
  ON payments FOR SELECT
  TO authenticated
  USING (is_admin());

-- reports: ì–´ë“œë¯¼ì€ ëª¨ë“  ë¦¬í¬íŠ¸ ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "admin_select_all_reports"
  ON reports FOR SELECT
  TO authenticated
  USING (is_admin());

CREATE POLICY "admin_update_reports"
  ON reports FOR UPDATE
  TO authenticated
  USING (is_admin())
  WITH CHECK (is_admin());

-- target_universities: ì–´ë“œë¯¼ì€ ëª¨ë“  ëª©í‘œëŒ€í•™ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "admin_select_all_target_universities"
  ON target_universities FOR SELECT
  TO authenticated
  USING (is_admin());

-- record í•˜ìœ„ í…Œì´ë¸”ë“¤ë„ ë™ì¼í•˜ê²Œ ì–´ë“œë¯¼ SELECT ì •ì±… ì¶”ê°€
-- (record_attendance, record_awards, record_certifications, ...)
```

### 6.2 í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

```
RESEND_API_KEY=re_xxxx          # Resend API í‚¤
RESEND_FROM_EMAIL=noreply@skyroad.co.kr  # ë°œì‹  ì´ë©”ì¼ (ì„ íƒ, ê¸°ë³¸ê°’ ì‚¬ìš© ê°€ëŠ¥)
```

---

## 7. ì—ëŸ¬ ì²˜ë¦¬

### ì˜ˆìƒ ì—ëŸ¬ ì¼€ì´ìŠ¤

| ì—ëŸ¬ ìƒí™©                 | HTTP | ì—ëŸ¬ ì½”ë“œ           | ì‚¬ìš©ì ë©”ì‹œì§€                                    | ì²˜ë¦¬ ë°©ë²•          |
| ------------------------- | ---- | ------------------- | ------------------------------------------------ | ------------------ |
| ë¯¸ì¸ì¦ ì ‘ê·¼               | 401  | `UNAUTHORIZED`      | "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."                           | ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™ |
| ë¹„ê´€ë¦¬ì ì ‘ê·¼             | 403  | `FORBIDDEN`         | "ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."                      | / ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸    |
| ë¦¬í¬íŠ¸ ì—†ìŒ               | 404  | `NOT_FOUND`         | "ë¦¬í¬íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."                     | ëª©ë¡ìœ¼ë¡œ ë³µê·€      |
| ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨          | 500  | `EMAIL_SEND_FAILED` | "ì´ë©”ì¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”." | ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ   |
| ì´ë¯¸ ë°œì†¡ëœ ë¦¬í¬íŠ¸ ì¬ë°œì†¡ | 409  | `ALREADY_DELIVERED` | "ì´ë¯¸ ë°œì†¡ëœ ë¦¬í¬íŠ¸ì…ë‹ˆë‹¤."                      | ì•Œë¦¼ í‘œì‹œ          |
| ê²€ìˆ˜ ì „ ë°œì†¡ ì‹œë„         | 400  | `NOT_REVIEWED`      | "ê²€ìˆ˜ê°€ ì™„ë£Œë˜ì§€ ì•Šì€ ë¦¬í¬íŠ¸ì…ë‹ˆë‹¤."             | ì•Œë¦¼ í‘œì‹œ          |

---

## 8. ì—£ì§€ ì¼€ì´ìŠ¤

### 8.1 ê¶Œí•œ ê´€ë ¨

- **ìê¸° ìì‹ ì˜ admin ê¶Œí•œ í•´ì œ**: ë§ˆì§€ë§‰ adminì€ ìì‹ ì˜ roleì„ userë¡œ ë³€ê²½í•  ìˆ˜ ì—†ì–´ì•¼ í•œë‹¤. APIì—ì„œ admin ìˆ˜ê°€ 1ëª…ì¼ ë•Œ role ë³€ê²½ ê±°ë¶€.
- **ë™ì‹œ role ë³€ê²½**: ë‘ adminì´ ë™ì‹œì— ê°™ì€ ìœ ì €ì˜ roleì„ ë³€ê²½í•˜ëŠ” ê²½ìš° â†’ ë§ˆì§€ë§‰ ìš”ì²­ì´ ë°˜ì˜ (optimistic lock ë¶ˆí•„ìš”, ë‹¨ìˆœ ë®ì–´ì“°ê¸°)
- **ì–´ë“œë¯¼ ì„¸ì…˜ ë§Œë£Œ**: ì–´ë“œë¯¼ í˜ì´ì§€ ì‚¬ìš© ì¤‘ ì„¸ì…˜ ë§Œë£Œ ì‹œ â†’ ë¯¸ë“¤ì›¨ì–´ì—ì„œ / ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 8.2 ë¦¬í¬íŠ¸ ê´€ë ¨

- **AI ìƒì„±ì´ ì•„ì§ ì•ˆ ëœ ë¦¬í¬íŠ¸**: contentê°€ nullì¸ ê²½ìš° ê²€ìˆ˜ ë¶ˆê°€. ê²€ìˆ˜ ë²„íŠ¼ ë¹„í™œì„±í™”.
- **ë™ì‹œ ê²€ìˆ˜**: ë‘ adminì´ ê°™ì€ ë¦¬í¬íŠ¸ë¥¼ ë™ì‹œì— ê²€ìˆ˜í•˜ëŠ” ê²½ìš° â†’ ë§ˆì§€ë§‰ ê²€ìˆ˜ê°€ ë°˜ì˜. reviewed_byê°€ ë§ˆì§€ë§‰ ê²€ìˆ˜ìë¡œ ì—…ë°ì´íŠ¸.
- **ì´ë©”ì¼ ë°œì†¡ í›„ ì¬ë°œì†¡**: delivered_atì´ ì´ë¯¸ ì„¤ì •ëœ ê²½ìš° â†’ "ì¬ë°œì†¡" ë²„íŠ¼ìœ¼ë¡œ í‘œì‹œ. ì¬ë°œì†¡ ì‹œ í™•ì¸ ëª¨ë‹¬ í‘œì‹œ.
- **ë¦¬í¬íŠ¸ê°€ ì—†ëŠ” ì£¼ë¬¸**: ê²°ì œ ì™„ë£Œ í›„ AI ë¶„ì„ì´ ì•„ì§ ì‹œì‘ë˜ì§€ ì•Šì€ ê²½ìš° â†’ ë¦¬í¬íŠ¸ ëª©ë¡ì— í‘œì‹œë˜ì§€ ì•ŠìŒ (reports ë ˆì½”ë“œ ìì²´ê°€ ì—†ìœ¼ë¯€ë¡œ)

### 8.3 ë°ì´í„° ê´€ë ¨

- **ìœ ì € ì‚­ì œ (íƒˆí‡´) í›„ ë°ì´í„°**: Phase 1ì—ì„œëŠ” ìœ ì € ì‚­ì œ ê¸°ëŠ¥ ë¯¸êµ¬í˜„. í–¥í›„ soft delete ê³ ë ¤.
- **ëŒ€ì‹œë³´ë“œ ëŒ€ëŸ‰ ë°ì´í„°**: ì§‘ê³„ ì¿¼ë¦¬ëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰. ìºì‹±ì€ Phase 2ì—ì„œ ê³ ë ¤.
- **í˜ì´ì§€ë„¤ì´ì…˜ ë²”ìœ„ ì´ˆê³¼**: ìš”ì²­í•œ pageê°€ totalPagesë¥¼ ì´ˆê³¼í•˜ëŠ” ê²½ìš° â†’ ë§ˆì§€ë§‰ í˜ì´ì§€ ë°ì´í„° ë°˜í™˜.

### 8.4 ì´ë©”ì¼ ê´€ë ¨

- **ìœ ì € ì´ë©”ì¼ ì—†ìŒ**: OAuthë¡œ ê°€ì…í–ˆìœ¼ë‚˜ ì´ë©”ì¼ì´ ì—†ëŠ” ê²½ìš° (ê·¹íˆ ë“œë¬¾) â†’ ë°œì†¡ ì‹¤íŒ¨ ì²˜ë¦¬ + ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- **ì´ë©”ì¼ ë°”ìš´ìŠ¤**: Resend ì›¹í›…ìœ¼ë¡œ ë°”ìš´ìŠ¤ ì¶”ì  (Phase 2)
- **ì´ë©”ì¼ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°**: Phase 1ì—ì„œëŠ” ë¯¸êµ¬í˜„. Phase 2ì—ì„œ ë°œì†¡ ì „ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ ì¶”ê°€ ê³ ë ¤.

---

## 9. ì‹ ê·œ ì˜ì¡´ì„±

```bash
pnpm add resend         # ì´ë©”ì¼ ë°œì†¡ (Resend SDK)
pnpm add recharts       # ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
```

---

## 10. êµ¬í˜„ ë‹¨ê³„

### Phase 1: MVP

- [x] ì–´ë“œë¯¼ ê¸°ëŠ¥ ëª…ì„¸ì„œ ì‘ì„± (ë³¸ ë¬¸ì„œ)
- [ ] ë¯¸ë“¤ì›¨ì–´ì— `/admin/*` ê²½ë¡œ ê°€ë“œ ì¶”ê°€
- [ ] RLS ì •ì±… ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ì–´ë“œë¯¼ ë ˆì´ì•„ì›ƒ + í—¤ë”
- [ ] ëŒ€ì‹œë³´ë“œ (í•µì‹¬ ì§€í‘œ ì¹´ë“œ + ì¼ë³„ ì¶”ì´ ì°¨íŠ¸)
- [ ] ìœ ì € ê´€ë¦¬ (ëª©ë¡ + ê²€ìƒ‰ + ì—­í•  ë³€ê²½)
- [ ] ìƒê¸°ë¶€ ê´€ë¦¬ (ëª©ë¡ + ìƒì„¸ ì¡°íšŒ)
- [ ] ë¦¬í¬íŠ¸ ê´€ë¦¬ (ëª©ë¡ + ê²€ìˆ˜ + ì´ë©”ì¼ ë°œì†¡)

### Phase 2: ê°œì„ 

- [ ] ëŒ€ì‹œë³´ë“œ ì „í™˜ìœ¨ í¼ë„ ì°¨íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ í”Œëœë³„ ë§¤ì¶œ ë¹„êµ íŒŒì´ ì°¨íŠ¸
- [ ] ì½”í˜¸íŠ¸ ë¦¬í…ì…˜ ë¶„ì„
- [ ] ì´ë©”ì¼ ë°œì†¡ ì „ ë¯¸ë¦¬ë³´ê¸°
- [ ] ì´ë©”ì¼ ë°”ìš´ìŠ¤/ì—´ëŒ ì¶”ì  (Resend ì›¹í›…)
- [ ] ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ (ëª¨ë°”ì¼ ëŒ€ì‘)

### Phase 3: ê³ ë„í™”

- [ ] ëŒ€ì‹œë³´ë“œ ë°ì´í„° ìºì‹± (ISR ë˜ëŠ” Redis)
- [ ] ë¦¬í¬íŠ¸ ë‚´ìš© ì¸ë¼ì¸ í¸ì§‘ (ê²€ìˆ˜ ì‹œ ìˆ˜ì •)
- [ ] ì–´ë“œë¯¼ í™œë™ ë¡œê·¸ (audit log)
- [ ] ì¼ê´„ ì²˜ë¦¬ (ë‹¤ê±´ ë¦¬í¬íŠ¸ ë°œì†¡)
- [ ] ìœ ì € íƒˆí‡´ ê´€ë¦¬ (soft delete)

---

## ì œì•½ì‚¬í•­

- Phase 1ì—ì„œëŠ” ë°ìŠ¤í¬í†± í™˜ê²½ ìš°ì„ . ëª¨ë°”ì¼ ì–´ë“œë¯¼ì€ Phase 2ì—ì„œ ëŒ€ì‘.
- ë¦¬í¬íŠ¸ content(JSONB)ì˜ êµ¬ì¡°ëŠ” AI ìƒì„± ëª¨ë“ˆì—ì„œ ì •ì˜í•˜ë©°, ì–´ë“œë¯¼ì—ì„œëŠ” ì½ê¸° ì „ìš©ìœ¼ë¡œ ë Œë”ë§í•œë‹¤.
- `auth.users` í…Œì´ë¸”ì€ Supabase Authê°€ ê´€ë¦¬í•˜ë¯€ë¡œ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë©”ì¼ ì¡°íšŒ ì‹œ `supabase.auth.admin.listUsers()` ë˜ëŠ” service_role keyë¥¼ ì‚¬ìš©í•œë‹¤.
